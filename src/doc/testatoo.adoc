

[source,java,linenums,options="nowrap"]
[subs="verbatim,attributes"]
----
include::{sourcedir}/org/testatoo/bundle/html5/ComponentsTest
----



In TDD/BBD style we write test first. And Testatoo have been created for this goal.

For example, testing a simple search in Google looks like this :

[source, java]
-------------------------------------------------------------------------------
package starter

import org.junit.AfterClass
import org.junit.BeforeClass
import org.junit.Test
import org.junit.runner.RunWith
import org.junit.runners.JUnit4
import org.openqa.selenium.firefox.FirefoxDriver
import org.testatoo.bundle.html5.component.Button
import org.testatoo.bundle.html5.component.fields.TextField
import org.testatoo.core.Testatoo
import org.testatoo.evaluator.webdriver.WebDriverEvaluator
import starter.component.GoogleItem
import starter.component.GoogleListView

import static org.testatoo.core.Testatoo.*
import static starter.component.property.Properties.*
import static org.testatoo.core.state.States.*
import static org.testatoo.core.action.Actions.*
import static org.testatoo.core.input.Mouse.*

@RunWith(JUnit4)
class GoogleSearchTest {

    static TextField searchField
    static Button searchButton
    static GoogleListView resultList

    @BeforeClass
    public static void setup() {
        Testatoo.evaluator = new WebDriverEvaluator(new FirefoxDriver()) <1>
        visit 'http://www.google.ca' // Or open 'http://www.google.com'
        init()
    }

    private static void init() {
        searchField = $('#lst-ib') as TextField
        searchButton = $('#sblsbb button') as Button        <2>
        resultList = $('#rso') as GoogleListView
    }

    @AfterClass
    public static void tearDown() { evaluator.close() }

    @Test
    public void simple_test() {
        resultList.should { be missing }        <3>
        searchField.should { be visible }

        fill searchField with 'groovy'          <4>
        click_on searchButton

        resultList.should { be visible }

        GoogleItem item = resultList.items[1];
        item.should {
            have title.containing('The Groovy programming language')
            have url.containing('www.groovy-lang.org')
            have description.containing('Groovy is a powerful, optionally typed and dynamic language')
        }
    }
}
-------------------------------------------------------------------------------
If you run the test, it should process a simple search on Google.
Some interesting elements can be shown in this test :


<2> Testatoo works with strongly typed components like TextField, Button, GoogleListView.
    The power of Testatoo is in one hand to provide a rich list of components, and on the other one the possibility
    to easily create and compose your own components set.

<3> Testatoo uses deferred evaluation.
    We instantiate a Component event if the component is not available in the page.
    You can test if the component is missing

<4> Testatoo DSL is very clean and functional.
    Testatoo is based on a clear and powerful syntax.
    Testatoo code never refers to a technical layer Under no circumstances in this test does the underline DOM technology transpire in our code.

[NOTE]
====
As a rule, when you create a test with Testatoo, we recommend to add some default imports to facilitate the automatic completion in your favorite IDE(A).

[source, java]
-------------------------------------------------------------------------------
    import static org.testatoo.core.Testatoo.*
    import static org.testatoo.core.input.Mouse.*
    import static org.testatoo.core.input.Keyboard.*
    import static org.testatoo.core.property.Properties.*
    import static org.testatoo.core.state.States.*
    import static org.testatoo.core.action.Actions.*
-------------------------------------------------------------------------------
====



Testatoo provides a DSL to write tests in a natural language, easy to manipulate from a specifications point of view.
As this is a high level language, it allows tests to be written before UI coding.

**YES**, for the first time, with Testatoo, you can write UI tests FIRST

== How to interact with content

==== The $ function

Testatoo injects the isolated (noConflict mode) jQuery lib in the application under test. Testatoo uses the jQuery functional API
to make complex DOM evaluations. So you can use all the css3 selector power to quering the content of you page.


==== The $$ function



==== The HTML5 bundle

Testatoo comes with a bunch of predefined HTML components. These components are not only the standard representation of HTML elements,
but also a powerful base to build your own components. Each component supports States and Properties. One of the strength of Testatoo
is the capability to add support for new States and Properties and to override existing States and Properties, on existing or new components.


===== Button

image::components/Button.png[Button]

[source, java]
-------------------------------------------------------------------------------
Button button = $('#button') as Button
button.should {
    have text('My Button Text')
}

clickOn button
-------------------------------------------------------------------------------

===== CheckBox

image::components/CheckBox.png[CheckBox]

[source, java]
-------------------------------------------------------------------------------
CheckBox checkbox = $('#checkbox') as CheckBox
checkbox.should {
    have label('Check me out ')
    be unchecked
}

clickOn checkbox    // Check the checkbox
//  OR
check checkbox      // Check the checkbox or throw and exception if the checkbox is already checked
-------------------------------------------------------------------------------

image::components/CheckBox_checked.png[CheckBox]

[source, java]
-------------------------------------------------------------------------------
CheckBox checkbox = $('#checkbox') as CheckBox
checkbox.should {
    have label('Check me out ')
    be checked
}

clickOn checkbox    // Uncheck the checkbox
//  OR
uncheck checkbox    // Uncheck the checkbox or throw and exception if the checkbox is already checked
-------------------------------------------------------------------------------

===== Radio

image::components/Radio.png[Radio]

[source, java]
-------------------------------------------------------------------------------
Radio radio_checked = $('#radio_1') as Radio
Radio radio_unchecked = $('#radio_2') as Radio

radio_checked.should {
    have label('Radio label checked')
    be checked
}

radio_unchecked.should {
    have label('Radio label unchecked')
    be unchecked
}

clickOn radio_unchecked     // Check the radio
//  OR
check radio_unchecked       // Check the radio

check radio_checked         // Throw an exception (the radio is already checked)
uncheck radio_checked       // Throw an exception (cannot unckeck a Radio)
-------------------------------------------------------------------------------

===== DropDown

image::components/DropDown.png[DropDown]

[source, java]
-------------------------------------------------------------------------------
DropDown dropdown = $('#dropdown') as DropDown
dropdown.should {
    have label('OS')
    have selectedItems('None')

    have 8.items
    have items('None', 'Ubuntu', 'Fedora', 'Gentoo', 'XP', 'Vista', 'FreeBSD', 'OpenBSD')

    have 3.groupItems
    have groupItems('linux', 'win32', 'BSD')
}

on dropdown select 'Ubuntu'   // Select the 'Ubuntu' in the dropdown or throw an exception if the item is disabled
-------------------------------------------------------------------------------

===== GroupItem
[source, java]
-------------------------------------------------------------------------------
DropDown dropdown = $('#dropdown') as DropDown
GroupItem group = dropdown.groupItem('linux') // Or dropdown.groupItems[0]

group.should {
    have value('linux')
    have items('Ubuntu', 'Fedora', 'Gentoo')
}
-------------------------------------------------------------------------------

===== Item
[source, java]
-------------------------------------------------------------------------------
DropDown dropdown = $('#dropdown') as DropDown
Item item = dropdown.item('Fedora')  // Or dropdown.items[1]
item.should {
    have value('Fedora')
    be unselected
}
-------------------------------------------------------------------------------

==== ListBox

image::components/ListBox_1.png[ListBox]

This image show all the items available in the ListBox

image::components/ListBox_2.png[ListBox]

[source, java]
-------------------------------------------------------------------------------
ListBox listBox = $('#cities') as ListBox
listbox.should {
    have label('Cities list')
    have 6.items
    have items('Montreal', 'Quebec', 'Montpellier', 'New York', 'Casablanca', 'Munich')
    have selectedItems('Montreal')

    have 3.visibleItems     // See the first image
    be multiSelectable      // We can select more than on item
}

// Try to select an another item with a control + click
CTRL.click listBox.item('Montpellier')
//  OR
select listBox.item('Montpellier')
//  OR
on listBox select 'Montpellier'

listbox.should { have selectedItems('Montreal', 'Montpellier') }

on listBox select 'New York', 'Casablanca'


select listBox.items[2]     // Throw an exception if we try to select a disabled element

unselect listBox.items[0]   // Can unselect an item
listbox.should {
    have selectedItems('Montpellier')
}
-------------------------------------------------------------------------------



==============================================================================================
==============================================================================================
==============================================================================================










=== Evaluate State

States evaluations are applied thought the keyword *be*


=== Evaluate Property

Properties evaluations are applied thought the keyword *have*

[source, java]
-------------------------------------------------------------------------------
Button button = $('#button') as Button
button.should {
  have text('Ok')
}

// Or

assert button.has(Text) == 'Ok'
-------------------------------------------------------------------------------

All properties that implied a *String* support some pattern methods

[options="header"]
|====================================================================================================
| Method            |   Description
| *startsWith*      |   Matches values that start with the given value
| *contains*        |	Matches values that contain the given value anywhere
| *endsWith*	    |	Matches values that end with the given value
| *containsWord*	|	Matches values that contain the given value surrounded by either whitespace or the beginning or end of the value
| *notStartsWith*	|	Matches values that DO NOT start with the given value
| *notContains*	    |	Matches values that DO NOT contain the given value anywhere
| *notEndsWith*	    |	Matches values that DO NOT end with the given value
| *notContainsWord* |	Matches values that DO NOT contain the given value surrounded by either whitespace or the beginning or end of the value
|====================================================================================================

=== The Action



=== The Components

Testatoo comes with a bunch of predefined HTML components. These components are not only the standard representation of HTML elements,
but also a powerful base to build your own components. Each component supports States and Properties. One of the strength of Testatoo
is the capability to add support for new States and Properties and to override existing States and Properties, on existing or new components.

==== Component (the base Class)
[source, java]
-------------------------------------------------------------------------------
Component component = $('#component') as Component <1>
component.should {
    be enabled
    be disabled
    be available    <2>
    be missing
    be hidden
    be visible
}
-------------------------------------------------------------------------------

<1> *All other components in Testatoo inherit from it*
<2> *All components owns this base states*







==== ListView

image::components/ListView.png[ListBox]

[source, java]
-------------------------------------------------------------------------------
ListView listView = $('#list_view') as ListView
listView.should {
    have 5.items
    have items('Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item 5')
}

listView.items[0].should { have value('Item 1') }
-------------------------------------------------------------------------------

==== DataGrid

image::components/DataGrid.png[DataGrid]

[source, java]
-------------------------------------------------------------------------------
DataGrid data_grid = $('#data_grid') as DataGrid
data_grid.should {
    have 3.columns
    have 4.rows
}

// Can work at the Column Level
Column column = data_grid.columns[0]
column.should {
    have title('Column 1 title')
    have 4.cells
}

// Get Column by title
data_grid.column('Column 1 title').should { have 4.cells }

// Or at the Row Level
Row row = data_grid.rows[0]
row.should {
    have 3.cells
}

// Can evaluate a cell
row.cells[1].should {
    have value('cell 12')
}
-------------------------------------------------------------------------------

==== Form

image::components/Form.png[Form]

[source, java]
-------------------------------------------------------------------------------
Form form = $('#form') as Form
EmailField email_field = $('#email') as EmailField
PasswordField password_field = $('#password') as PasswordField
Button submit_button = $('#submit]') as Button
Button reset_button = $('#reset') as Button


form.should {
    contains(
        emailField,
        passwordField,
        submit_button,
        reset_button
    )
}

// Could Submit the form
submit form
// OR
clickOn submit_button

// Could Reset the form
reset form
// OR
clickOn reset_button
-------------------------------------------------------------------------------

==== INPUT

===== TextField

image::components/TextField.png[TextField]

[source, java]
-------------------------------------------------------------------------------
TextField textField = $('#text_field') as TextField
textField.should {
    have label('Text')
    have placeholder('Text')
    be empty
    be optional     // Or required
}
-------------------------------------------------------------------------------


===== PasswordField

image::components/PasswordField.png[PasswordField]

[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== DateTimeField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== EmailField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== MonthField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== ColorField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== SearchField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== TimeField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== URLField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== WeekField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== DateField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== RangeField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== NumberField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------

===== PhoneField
[source, java]
-------------------------------------------------------------------------------
-------------------------------------------------------------------------------


== Under the hood (Welcome to the Jungle)

So, now you have probably write and execute your first test, you encounter the first obstacle.
Yes indeed now we need to create un custom component like a Progress Bar, a Date Picker, a Carousel or some Tab Panel.

This is here where you discover the power of Testatoo.

=== How Stuff Works









