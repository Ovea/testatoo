= Testatoo documentation
v2.0, 2014
:toc:
:doctype: book
:icons: font
:homepage: https://github.com/Ovea/testatoo
:desc: This is the documentation of Testatoo
:testaoo-version: 2.0.b1

:source-highlighter: highlightjs
:imagesdir: images

image:logo.png[float="left"]

= Introduction

Testatoo is a web user interface testing tool. It's the result of numerous real-world observations of developers in the trenches in the area of GUI testing.
Working for many years to promote the TDD approaches, we often faced difficulties in their implementation for the graphical layer of applications.

The "test FIRST" principle excludes all scenario recorder based approaches that only allow you to write a posteriori tests.
Our experience has taught us that this path is a dead end (but we reserve this for another discussion...).

Another problem is GUI tests are brittle and costly! We do think that this is due to the lack of abstraction in existing UI testing tools.

Testatoo provides on one hand an abstraction of the UI business domain through an expressive API and on the other hand a way to express this domain via a DSL (a button semantically stays a buttons whatever the technology).
With Testatoo you can therefore write tests with a seldom achieved level of expressiveness and make these tests INDEPENDENT of the underlying technology.

Testatoo can therefore transform the test in real assets, present throughout the life of the application and always in tune with the latest version of the application.

= Technologies

Testatoo is built on top of http://code.google.com/p/selenium/[WebDriver], it can work with any browser supported by https://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions[WebDriver] (IE, Google-chrome, Firefox, ...).
Testatoo provides like http://www.gebish.org/testing[geb] an extra layer of convenience and productivity, it is always possible to "fallback" to the WebDriver level to do something directly should you need to.
But Testatoo adds a powerful DSL while maintaining the usage of Groovy and keeps the advantage of a strong typed language.

Example of a test syntax :

[source, groovy]
-------------------------------------------------------------------------------
    assertThat textField has label('myLabel')
    assertThat textField has placeholder('My placeholder')
    assertThat textField is empty
-------------------------------------------------------------------------------

= Why should I use Testatoo

= Installation & Usage (I want to ride my bicycle)

Via Mavenâ€¦

[source, xml]
-------------------------------------------------------------------------------
<dependency>
    <groupId>org.testatoo</groupId>
    <artifactId>testatoo-core</artifactId>
    <version>{testaoo-version}</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.seleniumhq.selenium</groupId>
    <artifactId>selenium-java</artifactId>
    <version>2.39.0</version>
    <scope>test</scope>
</dependency>
-------------------------------------------------------------------------------

Testatoo work with existing popular unit test libraries like JUnit.
In our first test (BaseGoogleTest) we test a simple search on Google.

The test looks like :

[source, groovy]
-------------------------------------------------------------------------------
package starter

import org.junit.AfterClass
import org.junit.BeforeClass
import org.junit.Test
import org.junit.runner.RunWith
import org.junit.runners.JUnit4
import org.openqa.selenium.firefox.FirefoxDriver
import org.testatoo.core.Testatoo
import org.testatoo.core.component.Button
import org.testatoo.core.component.input.TextField
import org.testatoo.core.component.list.ListView
import org.testatoo.core.evaluator.webdriver.WebDriverEvaluator

import static org.testatoo.core.Testatoo.*
import static org.testatoo.core.input.Mouse.*
import static org.testatoo.core.property.Properties.*
import static org.testatoo.core.state.States.*

@RunWith(JUnit4)
class BaseGoogleTest {

    @BeforeClass
    public static void setup() {
        Testatoo.evaluator =  new WebDriverEvaluator(new FirefoxDriver())
        open 'http://www.google.com'
    }
    @AfterClass public static void tearDown() { evaluator.close() }

    @Test
    public void simple_test() {
        TextField searchField = $('#gbqfq') as TextField
        Button searchButton = $('#gbqfb') as Button
        ListView resultList = $('#rso') as ListView

        assertThat resultList is missing
        assertThat searchField is visible

        on searchField enter 'Testatoo'
        clickOn searchButton

        waitUntil {resultList.is visible}

        assertThat resultList.items[0] has value.containing('Testatoo')
    }

}
-------------------------------------------------------------------------------

If you run the test it should process a simple search on google engine.
Some interesting thing can be show in this test :

 . We work with Strongly typed components::
fdsfdsfdsfdsfdsfdsfdsfds
fdsfdsfdsfdsfds
fsdfdsfsdfsd
 . number
 . number
 . number

[horizontal]
.Labeled horizontal
We work with Strongly typed components:: Definition 1
Term 2:: Definition 2
Term 3::
    Definition 3

 1 - We work with Strongly typed components (TextField, Button, ListView)
 2 - The evaluation of properties or states are deferred in the time.
 You can instantiate ListView also the component is not available in the page.
 You can also test that the component is missing.

 3 - The DSL is very clean and functional
 4 - The code never refer to a technical layer, DOM manipulation and interaction are totally hidden


In general rule when you create a test with Testatoo we recomand to add some default import to facilitate the auto completion on your favorite IDE(A) ;)

[source, groovy]
-------------------------------------------------------------------------------

import static org.testatoo.core.Testatoo.*
import static org.testatoo.core.input.Mouse.*
import static org.testatoo.core.property.Properties.*
import static org.testatoo.core.state.States.*

-------------------------------------------------------------------------------







